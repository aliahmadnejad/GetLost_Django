<div class="modal fade price-change-modal" id="exampleModal3" tabindex="-1" role="dialog"
    aria-labelledby="exampleModalLabel" action="" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <!-- <div class="modal-header">
                    </div> -->
            {% if roomdetails.price_password is not None %}
            <!-- PASSWORD INPUT FORM -->
            <form class="price-password-form" id='PricePasswordForm' data-url="{{ request.path }}" method='POST'
                action="" name="password_price_form">
                {% csrf_token %}
                <div class="modal-body password-input-body">
                    <div class="modal-instruction">Please Enter PIN to Change Price.</div>
                    <div class="password-input-row">
                        <div class="display-text-password">PIN:</div>
                        <input type="password" name="price_password" placeholder="" id="price-password-input"
                            class="form-control input-password" data-password="{{ roomdetails.price_password }}">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <input class="btn change-password-page-btn" type="button" value="Change">
                    <input class="btn btn-primary check-password-btn" type="button" value="Next">
                </div>
            </form>

            {% else %}
            <!-- PASSWORD CREATION FORM -->
            <form class="create-price-password-form" id='CreatePasswordForm' data-url="{{ request.path }}" method='POST'
                action="" name="create-price-password-form">
                {% csrf_token %}
                <div class="modal-body password-create-input-body">
                    <div class="modal-instruction">Please Create PIN to Change Price.</div>
                    <div class="password-create-input-row">
                        <div class="display-text-password-new password-create-side-text">PIN:</div>
                        <input type="password" name='price_password' placeholder=""
                            class="form-control input-password-new" field='price_password' id="create-price-password">
                    </div>
                    <div class="password-create-input-row">
                        <div class="display-text-password-confirm password-create-side-text">Confirmation PIN:</div>
                        <input type="password" name="price_password_confirm" placeholder=""
                            class="form-control input-password-confirm ">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <input class="btn btn-primary create-password-btn" type="button" value="Create" name='create_btn'
                        field='price_password'>
                </div>
            </form>
            {% endif %}

            <!-- CHANGE PASSWORD FORM -->
            <form class="change-price-password-form" id='ChangePricePasswordForm' data-url="{{ request.path }}"
                method='POST' action="" name="change-price-password-form">
                {% csrf_token %}
                <div class="modal-body password-change-input-body">
                    <div class="modal-instruction">Please Enter Your Old and New PIN to Change Price.</div>
                    <div class="password-change-input-row old">
                        <div class="display-change-text-password-old password-change-side-text">Old PIN:</div>
                        <input type="password" name='old_price_password' placeholder=""
                            class="form-control input-password-old " id="input-password-old" field='price_password'
                            data-password="{{ roomdetails.price_password }}">
                    </div>
                    <div class="password-change-input-row">
                        <div class="display-change-text-password-new password-change-side-text">New PIN:</div>
                        <input type="password" name='price_password' placeholder=""
                            class="form-control change-input-password-new" field='price_password'
                            id="change-price-password">
                    </div>
                    <div class="password-change-input-row">
                        <div class="display-change-text-password-confirm password-change-side-text">Confirm PIN:</div>
                        <input type="password" name="price_password_confirm" placeholder=""
                            class="form-control change-input-password-confirm">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn back-btn">Back</button>
                    <input class="btn btn-primary change-password-btn" type="button" value="Change"
                        name='change_password_btn' field='price_password'>
                </div>
            </form>
            <!-- PRICE INPUT FORM -->
            <form class="price-form" id='ChangePriceForm' data-url="{{ request.path }}" method='POST' action=""
                name="price_form">
                {% csrf_token %}
                <div class="modal-body price-input-body">
                    <div class="modal-instruction">Current Price: ${{ roomdetails.price }}</div>
                    <div class="price-input-row">
                        <div class="display-text-price">New Price:</div>
                        <input type="text" name="price" placeholder="" class="form-control price-change" field='price'
                            maxlength="6">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <input class="btn btn-primary check-input-btn" type="button" value="Change" name='change_btn'
                        field='price'>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade total-beds-change-modal" id="exampleModal4" tabindex="-1" role="dialog"
    aria-labelledby="exampleModalLabel" action="" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <!-- <div class="modal-header">
                        </div> -->
            {% if roomdetails.total_beds_password is not None %}
            <!-- PASSWORD INPUT FORM -->
            <form class="total-beds-password-form" id='TotalBedsPasswordForm' data-url="{{ request.path }}"
                method='POST' action="" name="password_total_beds_form">
                {% csrf_token %}
                <div class="modal-body password-input-body">
                    <div class="modal-instruction">Please Enter PIN to Change Total Co-ed Beds.</div>
                    <div class="password-input-row">
                        <div class="display-text-password">PIN:</div>
                        <input type="password" name="total_beds_password" placeholder=""
                            class="form-control total-beds-input-password"
                            data-password="{{ roomdetails.total_beds_password }}">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <input class="btn change-password-page-btn" type="button" value="Change">
                    <input class="btn btn-primary check-password-btn" type="button" value="Next">
                </div>
            </form>
            {% else %}
            <!-- PASSWORD CREATION FORM -->
            <form class="create-total-beds-password-form" id='TotalBedsPasswordForm' data-url="{{ request.path }}"
                method='POST' action="" name="create-total-beds-password-form">
                {% csrf_token %}
                <div class="modal-body password-create-input-body">
                    <div class="modal-instruction">Please Create PIN to Change Total Coed-beds.</div>
                    <div class="password-create-input-row">
                        <div class="display-text-password-new">PIN:</div>
                        <input type="password" name='total_beds_password' placeholder=""
                            class="form-control total-beds-input-password-new " field='price_password'
                            id="create-total-beds-password">
                    </div>
                    <div class="password-create-input-row">
                        <div class="display-text-password-confirm">Confirmation PIN:</div>
                        <input type="password" name="total_beds_password_confirm" placeholder=""
                            class="form-control total-beds-input-password-confirm ">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <input class="btn btn-primary create-password-btn" type="button" value="Create" name='create_btn'
                        field='total_beds_password'>
                </div>
            </form>
            {% endif %}
            <!-- CHANGE PASSWORD FORM -->
            <form class="change-total-beds-password-form" id='ChangeTotalBedsPasswordForm' data-url="{{ request.path }}"
                method='POST' action="" name="change-total-beds-password-form">
                {% csrf_token %}
                <div class="modal-body password-change-input-body">
                    <div class="modal-instruction">Please Enter Your Old and New PIN to Change the Total Coed-beds.
                    </div>
                    <div class="password-change-input-row old">
                        <div class="display-change-text-password-old password-change-side-text">Old PIN:</div>
                        <input type="password" name='old_total_beds_password' placeholder=""
                            class="form-control total-beds-input-password-old" field='total_beds_password'
                            data-password="{{ roomdetails.total_beds_password }}">
                    </div>
                    <div class="password-change-input-row">
                        <div class="display-change-text-password-new password-change-side-text">New PIN:</div>
                        <input type="password" name='total_beds_password' placeholder=""
                            class="form-control total-beds-change-input-password-new " field='total_beds_password'
                            id="change-total-beds-password">
                    </div>
                    <div class="password-change-input-row">
                        <div class="display-change-text-password-confirm password-change-side-text">Confirm PIN:</div>
                        <input type="password" name="total_beds_password_confirm" placeholder=""
                            class="form-control total-beds-change-input-password-confirm">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn back-btn">Back</button>
                    <input class="btn btn-primary change-password-btn" type="button" value="Change"
                        name='change_password_btn' field='total_beds_password'>
                </div>
            </form>
            <!-- TOTAL COED-BEDS INPUT FORM -->
            <form class="total-beds-form" id='ChangeTotalBedsForm' data-url="{{ request.path }}" method='POST' action=""
                name="total_beds_form">
                {% csrf_token %}
                <div class="modal-body total-beds-input-body">
                    <div class="modal-instruction">Current Total Co-ed Beds: {{ roomdetails.total_coed_beds }}</div>
                    <div class="total-beds-input-row">
                        <div class="display-text-total-beds">New Total:</div>
                        <input type="text" name="total_coed_beds" placeholder="" class="form-control total-beds-change "
                            field='total-beds' pattern="\d*" maxlength="4">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <input class="btn btn-primary check-input-btn" type="button" value="Change" name='change_btn'
                        field='price'>
                </div>
            </form>
        </div>
    </div>
</div>




// -------------------------------------------------
// PRICE AND TOTAL BED PASSWORD -  reload page when modal is closed so form gets saved
// -------------------------------------------------
$("#exampleModal4").on('hidden.bs.modal', function () {
    // window.alert('hidden event fired!');
    if ($('#ChangeTotalBedsForm').css('display') == 'none') {
        // DONT DO ANYTHING
    }
    else {
        // window.location.reload();
        location.reload("#myform"); 
    }
});
$("#exampleModal3").on('hidden.bs.modal', function () {
    if ($('#ChangePriceForm').css('display') == 'none') {
        // DONT DO ANYTHING
    }
    else {
        // window.location.reload();
        location.reload("#myform"); 
    }
    // window.alert('hidden event fired!');
});

jQuery(document).ready(function () {

    // State Variables
    var variable;
    var months = ["January", "February", "March", "April", "May", "June",
        "July", "August", "September", "October", "November", "December"];
    // -------------------------------------------------
    // DATEPICKER SECTION ------------------------------
    // -------------------------------------------------
    $('.dp-button').click(function () {
        myFunction(this);
        variable = $(this).attr('id');
        // console.log(variable);
    });
    function myFunction(element) {
        console.log(element);
        console.log(element.id);
    };
    function getMonthName(month) {
        return months[month];
    }
    function getFormattedDate(date) {
        let year = date.getFullYear();
        let month = (1 + date.getMonth()).toString().padStart(2, '0');
        let day = date.getDate().toString().padStart(2, '0');

        return month + '-' + day + '-' + year;
    }
    function getFormattedDateString(date) {
        let year = date.getFullYear();
        let month = getMonthName(date.getMonth());
        let day = date.getDate();

        if (day == 1) {
            day = day + "st";
        }
        else if (day == 2) {
            day = day + "nd";
        }
        else if (day == 3) {
            day = day + "rd";
        }
        else {
            day = day + "th";
        }
        return day + ' ' + month + ' ' + year;
    }
    $('#datepicker').datepicker({
        format: 'mm-dd-yyyy',
        container: $(document.activeElement).parent(),
        autoHide: true
    }).on('pick.datepicker', function (e) {
        e.preventDefault(); // Prevent to pick the date
        var date = $('#datepicker').datepicker('getDate', true);
        // $("input[name='something']").val(date);
        $("#exampleModal5").modal("show");
        // var resDate = new Date($('.history-item').data('date'));   // ONLY GETS FIRST RESERVATION DATE
        // console.log("The resDate is:  " + resDate);
        var newDate = new Date(date);
        newDate = getFormattedDateString(newDate);
        var modal = $('#exampleModal5');
        // modal.find('.header-date').html(newDate);
        modal.find('#datepicker-modal').val(newDate);

        $('#history-container').find('.history-item').each(function () {
            // var innerDivId = $(this).attr('id');
            var dataDate = new Date($(this).data('date'));
            dataDate = getFormattedDate(dataDate);
         
            if (dataDate == date) {
                $(this).css("display", "block");
            }
            else {
                $(this).css("display", "none");
            }
        });     
    });
    $('#datepicker-modal').datepicker({
        format: 'mm-dd-yyyy',
        autoHide: true,
        container: $(document.activeElement).parent(),
        zIndex: 90000
    }).on('pick.datepicker', function (e) {
        e.preventDefault();
        var myDatePicker = $('#datepicker-modal').datepicker({});
        var modalDate = $('#datepicker-modal').datepicker('getDate', true);
        var newDate = new Date(modalDate);
        newDate = getFormattedDateString(newDate);
        $("#datepicker-modal").val(newDate);

        $('#history-container').find('.history-item').each(function () {
            var innerDivId = $(this).attr('id');
            var dataDate = new Date($(this).data('date'));
            dataDate = getFormattedDate(dataDate);
            if (dataDate == modalDate) {
                $(this).css("display", "block");
            }
            else {
                $(this).css("display", "none");
            }
        });        
    });
    var keyword = "";
    $("#search-name-field").keyup(function () {
        keyword = $(this).val();
        console.log(keyword);
        var count = 0;
        $('#history-container').find('.history-item').each(function () {

            console.log("test variable check: " + variable);
            var firstDate = $('#datepicker').datepicker('getDate', true);
            firstDate = new Date(firstDate);
            firstDate = getFormattedDate(firstDate);
            var modalDate = $('#datepicker-modal').datepicker('getDate', true);
            var newDate = new Date(modalDate);
            newDate = getFormattedDate(newDate);
            var dataDate = new Date($(this).data('date'));
            dataDate = getFormattedDate(dataDate);
            var parentId = $(this).attr('id');
            var childDiv = $(this).find('.reservation-customer');
            var childId = $(this).find('.reservation-customer').attr('id');
            var name = $(childDiv).html().toLowerCase();
            var filter = keyword.toLowerCase();
            console.log("Main Date: " + dataDate);
            console.log("first Date: " + firstDate);
            console.log("modal Date: " + modalDate);

            if (dataDate == firstDate && variable == 'datepicker') {
                $(this).css("display", "block");
                console.log("PART 1");
                if ($(childDiv).text().search(new RegExp(filter, "i")) < 0) {
                    // $(this).hide();  // MY CHANGE
                    $(this).css("display", "none");
                    // Show the list item if the phrase matches and increase the count by 1     
                }
                else {
                    // $(this).show(); // MY CHANGE
                    $(this).css("display", "block");
                    count++;
                }
            }
            else if (dataDate == modalDate && variable == 'datepicker-modal') {
                $(this).css("display", "block");
                console.log("PART 2");
                if ($(childDiv).text().search(new RegExp(filter, "i")) < 0) {
                    // $(this).hide();  // MY CHANGE
                    $(this).css("display", "none");
                    // Show the list item if the phrase matches and increase the count by 1             
                }
                else {
                    // $(this).show(); // MY CHANGE
                    $(this).css("display", "block");
                    count++;
                }
            }
            else {
                $(this).css("display", "none");
            }
        });
    });
    // -------------------------------------------------
    // CHANGE PRICE MODAL ------------------------------
    // -------------------------------------------------
    $('.open-modal-change-price').on('click', function (e) {
        function isEmpty(obj) {
            for (var key in obj) {
                if (obj.hasOwnProperty(key))
                    return false;
            }
            return true;
        }
        var currentlocation = window.location.href;
        var price = $(".price-text").data('price');
        var password = $(".input-password").data('password');


        // SET MODAL START PAGE
        $('.input-password').val('');
        $('.input-password-new').val('');
        $('.input-password-confirm').val('');
        $('.input-password-old').val('');
        $('.change-input-password-new').val('');
        $('.change-input-password-confirm').val('');

        $('#PricePasswordForm').css("display", "block");
        $('#ChangePriceForm').css("display", "none");
        $('#ChangePricePasswordForm').css("display", "none");

        $('.create-password-btn').on('click', function (e) {
            var inputPassword = $(".input-password-new").val();
            var inputPasswordConfirm = $(".input-password-confirm").val();


            if (inputPassword == inputPasswordConfirm) {
                e.preventDefault();
                serializeData = $('#PricePasswordForm').serialize();

                $.ajax({
                    url: currentlocation,
                    data: serializeData,
                    type: 'post',
                    success: function (response) {
                        $('#PricePasswordForm').css("display", "none");
                        $('#ChangePriceForm').css("display", "block");
                    }
                })
            }
            else {
                e.preventDefault();
                console.log("Passwords are not the same");
                // ERROR MESSAGE
            }
        });
        $('.check-password-btn').on('click', function (e) {
            var inputPassword = $(".input-password").val();
            if (password == inputPassword) {
                $('#PricePasswordForm').css("display", "none");
                $('#ChangePriceForm').css("display", "block");
            }
            else {
                console.log("FALSE");
                // ERROR MESSAGE
            }
        });
        $('.change-password-page-btn').on('click', function (e) {

            $('#PricePasswordForm').css("display", "none");
            $('#ChangePricePasswordForm').css("display", "block");

            $('.back-btn').on('click', function (e) { 

                $('#PricePasswordForm').css("display", "block");
                $('#ChangePricePasswordForm').css("display", "none");
            });

            $('.change-password-btn').on('click', function (e) {

                var oldPassword = $(".input-password-old").val();
                var newPassword = $(".change-input-password-new").val();
                var newPasswordConfirm = $(".change-input-password-confirm").val();

                if (password == oldPassword) {
                    if (newPassword == newPasswordConfirm) {
                        e.preventDefault();
                        serializeData = $('#ChangePricePasswordForm').serialize();

                        $.ajax({
                            url: currentlocation,
                            data: serializeData,
                            type: 'post',
                            success: function (response) {
                                $('#ChangePricePasswordForm').css("display", "none");
                                $('#ChangePriceForm').css("display", "block");
                            }
                        })
                    }  
                    else {
                        // ERROR MESSAGE
                        console.log("The new passwords do not match");
                    }
                }
                else {
                    // ERROR MESSAGE
                    console.log("The Old Password is incorrect");
                    if (newPassword == newPasswordConfirm) {
                        console.log("The new passwords match");
                    }
                    else {
                        // ERROR MESSAGE
                        console.log("The new passwords do not match");
                    }
                }       
            });
        });
        $('.price-change').keypress(function (event) {
            var $this = $(this);
            if ((event.which != 46 || $this.val().indexOf('.') != -1) &&
                ((event.which < 48 || event.which > 57) &&
                    (event.which != 0 && event.which != 8))) {
                event.preventDefault();
            }
            var text = $(this).val();
            if ((event.which == 46) && (text.indexOf('.') == -1)) {
                setTimeout(function () {
                    if ($this.val().substring($this.val().indexOf('.')).length > 3) {
                        $this.val($this.val().substring(0, $this.val().indexOf('.') + 3));
                    }
                }, 1);
            }
            if ((text.indexOf('.') != -1) &&
                (text.substring(text.indexOf('.')).length > 2) &&
                (event.which != 0 && event.which != 8) &&
                ($(this)[0].selectionStart >= text.length - 2)) {
                event.preventDefault();
            }
        });
        $('.price-change').bind("paste", function (e) {
            var text = e.originalEvent.clipboardData.getData('Text');
            if ($.isNumeric(text)) {
                if ((text.substring(text.indexOf('.')).length > 3) && (text.indexOf('.') > -1)) {
                    e.preventDefault();
                    $(this).val(text.substring(0, text.indexOf('.') + 3));
                }
            }
            else {
                e.preventDefault();
            }
        });
        $('.check-input-btn').on('click', function (e) {
            e.preventDefault();
            serializeData = $('#ChangePriceForm').serialize();
            $.ajax({
                url: currentlocation,
                data: serializeData,
                type: 'post',
                success: function (response) {
                    // window.location.reload();
                    location.reload("#myform"); 
                }
            })
        });
    });
    // -------------------------------------------------
    // CHANGE TOTAL BEDS MODAL -------------------------
    // -------------------------------------------------
    $('.open-modal-change-total-beds').on('click', function (e) {
        function isEmpty(obj) {
            for (var key in obj) {
                if (obj.hasOwnProperty(key))
                    return false;
            }
            return true;
        }
        var currentlocation = window.location.href;
        var totalBeds = $(".total-beds-text").data('price');
        var password = $(".total-beds-input-password").data('password');

        // SET MODAL START PAGE
        $('.total-beds-input-password').val('');
        $('.total-beds-input-password-new').val('');
        $('.total-beds-input-password-confirm').val('');
        $('.total-beds-input-password-old').val('');
        $('.total-beds-change-input-password-new').val('');
        $('.total-beds-change-input-password-confirm').val('');
        

        $('#TotalBedsPasswordForm').css("display", "block");
        $('#ChangeTotalBedsForm').css("display", "none");
        $('#ChangeTotalBedsPasswordForm').css("display", "none");


        $('.create-password-btn').on('click', function (e) {
            var inputPassword = $(".input-password-new").val();
            var inputPasswordConfirm = $(".input-password-confirm").val();

            if (inputPassword == inputPasswordConfirm) {
                console.log("Passwords are the same");
                e.preventDefault();
                serializeData = $('#TotalBedsPasswordForm').serialize();

                $.ajax({
                    url: currentlocation,
                    data: serializeData,
                    type: 'post',
                    success: function (response) {
                        $('#TotalBedsPasswordForm').css("display", "none");
                        $('#ChangeTotalBedsForm').css("display", "block");

                    }
                })
            }
            else {
                e.preventDefault();
                console.log("Passwords are not the same");
                // ERROR MESSAGE
            }
        });
        $('.check-password-btn').on('click', function (e) {
            var inputPassword = $(".total-beds-input-password").val();
            if (password == inputPassword) {
                $('#TotalBedsPasswordForm').css("display", "none");
                $('#ChangeTotalBedsForm').css("display", "block");
            }
            else {
                console.log("FALSE");
                // ERROR MESSAGE
            }
        });
        $('.change-password-page-btn').on('click', function (e) {

            $('#TotalBedsPasswordForm').css("display", "none");
            $('#ChangeTotalBedsPasswordForm').css("display", "block");

            $('.back-btn').on('click', function (e) {

                $('#TotalBedsPasswordForm').css("display", "block");
                $('#ChangeTotalBedsPasswordForm').css("display", "none");
            });

            $('.change-password-btn').on('click', function (e) {

                var oldPassword = $(".total-beds-input-password-old").val();
                var newPassword = $(".total-beds-change-input-password-new").val();
                var newPasswordConfirm = $(".total-beds-change-input-password-confirm").val();

                if (password == oldPassword) {
                    console.log("The Old Password is correct");
                    if (newPassword == newPasswordConfirm) {
                        console.log("The new passwords match");
                        e.preventDefault();
                        serializeData = $('#ChangeTotalBedsPasswordForm').serialize();

                        $.ajax({
                            url: currentlocation,
                            data: serializeData,
                            type: 'post',
                            success: function (response) {
                                $('#ChangeTotalBedsPasswordForm').css("display", "none");
                                $('#ChangeTotalBedsForm').css("display", "block");
                            }
                        })
                    }
                    else {
                        // ERROR MESSAGE
                        console.log("The new passwords do not match");
                    }
                }
                else {
                    // ERROR MESSAGE
                    console.log("The Old Password is incorrect");
                    if (newPassword == newPasswordConfirm) {
                        console.log("The new passwords match");
                    }
                    else {
                        // ERROR MESSAGE
                        console.log("The new passwords do not match");
                    }
                }
            });
        });

        $('.check-input-btn').on('click', function (e) {
            e.preventDefault();
            serializeData = $('#ChangeTotalBedsForm').serialize();

            $.ajax({
                url: currentlocation,
                data: serializeData,
                type: 'post',
                success: function (response) {
                    // window.location.reload();
                    location.reload("#myform"); 
                }
            })
        });
    });


    // -------------------------------------------------
    // CONFIRM MODAL-- OPEN ----------------------------
    // -------------------------------------------------
    $('.open-modal-confirm').on('click', function (event) {
        var recipient = $(this).data('customer');
        var age = $(this).data('customerage');
        var isconfirmed = $(this).data('isconfirmed');
        var profilepic = $(this).data('img');
        var currentlocation = window.location.href;
        let resID = $(this).data('resid');

        var country = $(this).data('country');
        var countryFlag = $(this).data('countryflag');
        var gender = $(this).data('gender');
        var email = $(this).data('email');
        var phone = $(this).data('phone');
        var contactName = $(this).data('contactname');
        var contactPhone = $(this).data('contactphone');

        $('.customer-info-01').css("display", "block");
        $('.customer-info-02').css("display", "none");

        if (gender == 'M') {
            gender = "Male";
        }
        else if (gender == 'F') {
            gender = "Female";
        }
        else {
            gender = "Unsure";
        }

        $.ajax({
            // url: $("myform").data('url'),
            url: currentlocation,
            beforeSend: function () {
                // Put if statement here for when you murge the confirm and check-in button
                var modal = $('#exampleModal');
                // modal.find('.modal-body input').val(recipient);
                modal.find('.name-field').text(recipient);
                modal.find('.age-field').html(age + " Yrs");
                modal.find('.profile-image').attr('src', profilepic);
                modal.find('.input-confirm').val(isconfirmed);
                modal.find('.is-confirmed2').val(isconfirmed);
                modal.find('.id-field').text(resID);
                modal.find('.reservationid').val(resID);
                modal.find('.country-field').html(country);
                modal.find('.country-flag-field').attr('src', countryFlag);
                modal.find('.gender-field').html(gender);
                modal.find('.phone-field').html(phone);
                modal.find('.email-field').html(email);
                modal.find('.emergency-contact-name-field').html(contactName + ":");
                modal.find('.emergency-contact-phone-field').html(contactPhone);
                serializeData = $('#confirmForm').serialize();

                $('.customer-info-01').css("display", "block");
                $('.customer-info-02').css("display", "none");
            }
        })  
        $(document).on("click", '.confirm-res', function (e) {
            e.preventDefault();   
            var confirmField = $('.is-confirmed-field').val();
            var conValue = $('.is-confirmed-field').data('value');
            // var cv = parseInt($('.is-confirmed2').attr('value'));
            // var cv = $('.is-confirmed2').val();
            // console.log(cv);

            if (isconfirmed == "False") {
                $('#confirmForm').find('.is-confirmed2').val("True");
            }
            else {
                console.log("its true brah");
            }
            serializeData = $('#confirmForm').serialize();
            $.ajax({
                url: currentlocation,
                data: serializeData,
                type: 'post',
                success: function (response) {
                    // $("#confirmForm").load(location.href + " #confirmForm>*", "");
                    window.location.reload();
                    // $('#myModal .modal-dialog').html($('#myModal .modal-dialog', data));
                    // $('#myModal').modal('show');
                }
            })
        });
        $('.more-btn').on('click', function (event) {
            $('.customer-info-01').css("display", "none");
            $('.customer-info-02').css("display", "block");

        });
        $('.back-btn').on('click', function (e) {

            $('.customer-info-01').css("display", "block");
            $('.customer-info-02').css("display", "none");
        });
    });
    // -------------------------------------------------
    // CHECKIN MODAL-- OPEN ----------------------------
    // -------------------------------------------------
    $('.open-modal-checkin').on('click', function (event) {
        var recipient = $(this).data('customer');
        var age = $(this).data('customerage');
        var isconfirmed = $(this).data('isconfirmed');
        var ischeckedin = $(this).data('ischeckedin');
        var profilepic = $(this).data('img');
        var currentlocation = window.location.href;
        let resID = $(this).data('resid');

        var country = $(this).data('country');
        var countryFlag = $(this).data('countryflag');
        var gender = $(this).data('gender');
        var email = $(this).data('email');
        var phone = $(this).data('phone');
        var contactName = $(this).data('contactname');
        var contactPhone = $(this).data('contactphone');

        console.log(resID);
        console.log("isconfirmed is: " + isconfirmed);
        console.log("ischeckedin is: " + ischeckedin);

        $('.customer-info-01').css("display", "block");
        $('.customer-info-02').css("display", "none");

        if (gender == 'M') {
            gender = "Male";
        }
        else if (gender == 'F') {
            gender = "Female";
        }
        else {
            gender = "Unsure";
        }

        $.ajax({
            // url: $("myform").data('url'),
            url: currentlocation,
            beforeSend: function () {
                // Put if statement here for when you murge the confirm and check-in button
                var modal = $('#exampleModal2');
                // modal.find('.modal-body input').val(recipient);
                modal.find('.name-field').text(recipient);
                modal.find('.age-field').html(age);
                modal.find('.profile-image').attr('src', profilepic);
                modal.find('.is-confirmed-field').text(isconfirmed);
                modal.find('.is-checkedin-field').text(ischeckedin);

                modal.find('.is-checkedin2').val(ischeckedin);


                modal.find('.id-field').text(resID);
                modal.find('.reservationid').val(resID);

                modal.find('.country-field').html(country);
                modal.find('.country-flag-field').attr('src', countryFlag);
                modal.find('.gender-field').html(gender);
                modal.find('.phone-field').html(phone);
                modal.find('.email-field').html(email);
                modal.find('.emergency-contact-name-field').html(contactName + ":");
                modal.find('.emergency-contact-phone-field').html(contactPhone);
                serializeData = $('#checkinForm').serialize();

                $('.customer-info-01').css("display", "block");
                $('.customer-info-02').css("display", "none");
                console.log(serializeData);
            }
        })
        $(document).on("click", '.checkin-res', function (e) {

            console.log(resID);

            if (ischeckedin == "False") {
                $('#checkinForm').find('.is-checkedin2').val("True");
            }
            else {
                console.log("its true brah");
            }
            serializeData = $('#checkinForm').serialize();
            console.log(serializeData);
            $.ajax({
                url: currentlocation,
                data: serializeData,
                type: 'post',
                success: function (response) {
                    // $("#confirmForm").load(location.href + " #confirmForm>*", "");
                    window.location.reload();
                    // $('#myModal .modal-dialog').html($('#myModal .modal-dialog', data));
                    // $('#myModal').modal('show');
                }
            })
        });
        $('.more-btn').on('click', function (event) {
            $('.customer-info-01').css("display", "none");
            $('.customer-info-02').css("display", "block");

        });
        $('.back-btn').on('click', function (e) {

            $('.customer-info-01').css("display", "block");
            $('.customer-info-02').css("display", "none");
        });
    });
    // -------------------------------------------------
    // PLUS BUTTON -------------------------------------
    // -------------------------------------------------
    // This button will increment the value
    $(document).on("click", '.qtyplus', function (e) {
        // Stop acting like a button
        e.preventDefault();
        // Get the field name
        fieldName = $(this).attr('field');
        var divUrl = $(this).attr('action');
        // Get its current value
        var currentVal = parseInt($('input[name=' + fieldName + ']').val());
        var occupiedBeds = parseInt($("div#" + fieldName).text());
        var totalBeds = parseInt($("div#total-beds").text());


        console.log(fieldName);
        // If is not undefined
        if (!isNaN(currentVal)) {
            // Increment
            if (currentVal < totalBeds) {
                $('input[name=' + fieldName + ']').val(currentVal + 1);
                // if loop here
                ++currentVal;
            }
            else {
                $('input[name=' + fieldName + ']').val(currentVal);
            }
        } else {
            // Otherwise put a 0 there
            $('input[name=' + fieldName + ']').val(0);
        }
        serializeData = $('#myform').serialize();
        console.log(serializeData);
        $.ajax({
            url: divUrl,
            data: serializeData,
            type: 'post',
            success: function (response) {
                location.reload("#myform");       
                // $("#myform").load(location.href + " #myform>*", "");
                // $("#roomdetail-form").load(window.location.href + " #roomdetail-form");

                // if (serializeData.success == false) {
                //     alert('error');
                // } else {
                //     // $("#roomdetail-form").load(" #roomdetail-form");
                //     $("#roomdetail-form").load(location.href + " #roomdetail-form>*", "");
                // }
            }
        })
    });
    // -------------------------------------------------
    // MINUS BUTTON ------------------------------------
    // -------------------------------------------------
    // This button will decrement the value till 0
    $(document).on("click", '.qtyminus', function (e) {
    // $(".qtyminus").click(function (e) {
        // Stop acting like a button
        e.preventDefault();
        // Get the field name
        fieldName = $(this).attr('field');
        var divUrl = $(this).attr('action');
        // Get its current value
        var currentVal = parseInt($('input[name=' + fieldName + ']').val());
        // If it isn't undefined or its greater than 0
        if (!isNaN(currentVal) && currentVal > 0) {
            // Decrement one
            $('input[name=' + fieldName + ']').val(currentVal - 1);
            --currentVal;
        } else {
            // Otherwise put a 0 there
            $('input[name=' + fieldName + ']').val(0);
        }
        serializeData = $('#myform').serialize();
        $.ajax({
            url: divUrl,
            data: serializeData,
            type: 'post',
            success: function (response) {
                // $("#myform").load(location.href + " #myform>*", "");
                location.reload("#myform");       

            }
        })
    });
    // -------------------------------------------------
    // TUTORIAL MODAL ----------------------------------
    // -------------------------------------------------
    $('.tutorial-modal-btn').on('click', function (e) {
        $('.step-01').css("display", "block");
        $('.step-02').css("display", "none");
        $('.step-03').css("display", "none");
        $('.step-04').css("display", "none");
    });
    // -------------------------------------------------
    // CUSTOMER INFO MODAL PAGE SETUP ------------------
    // -------------------------------------------------
    $('.before-btn').on('click', function (e) {
        if ($('.step-01').css('display') == 'block') {
            $('.step-01').css("display", "none");
            $('.step-02').css("display", "none");
            $('.step-03').css("display", "none");
            $('.step-04').css("display", "block");
        }
        else if ($('.step-02').css('display') == 'block') {
            $('.step-01').css("display", "block");
            $('.step-02').css("display", "none");
            $('.step-03').css("display", "none");
            $('.step-04').css("display", "none");
        }
        else if ($('.step-03').css('display') == 'block') {
            $('.step-01').css("display", "none");
            $('.step-02').css("display", "block");
            $('.step-03').css("display", "none");
            $('.step-04').css("display", "none");
        }
        else if ($('.step-04').css('display') == 'block') {
            $('.step-01').css("display", "none");
            $('.step-02').css("display", "none");
            $('.step-03').css("display", "block");
            $('.step-04').css("display", "none");
        }
        else {
            $('.step-01').css("display", "block");
            $('.step-02').css("display", "none");
            $('.step-03').css("display", "none");
            $('.step-04').css("display", "none");
        }

    });
    $('.after-btn').on('click', function (e) {
        if ($('.step-01').css('display') == 'block') {
            $('.step-01').css("display", "none");
            $('.step-02').css("display", "block");
            $('.step-03').css("display", "none");
            $('.step-04').css("display", "none");
        }
        else if ($('.step-02').css('display') == 'block') {
            $('.step-01').css("display", "none");
            $('.step-02').css("display", "none");
            $('.step-03').css("display", "block");
            $('.step-04').css("display", "none");
        }
        else if ($('.step-03').css('display') == 'block') {
            $('.step-01').css("display", "none");
            $('.step-02').css("display", "none");
            $('.step-03').css("display", "none");
            $('.step-04').css("display", "block");
        }
        else if ($('.step-04').css('display') == 'block') {
            $('.step-01').css("display", "block");
            $('.step-02').css("display", "none");
            $('.step-03').css("display", "none");
            $('.step-04').css("display", "none");
        }
        else {
            $('.step-01').css("display", "block");
            $('.step-02').css("display", "none");
            $('.step-03').css("display", "none");
            $('.step-04').css("display", "none");
        }
    });
});